[build]
builder = "NIXPACKS"
buildCommand = "pip install -r requirements.txt && playwright install chromium"
watchPatterns = [
  "scrapegoat/**"
]

[deploy]
# startCommand removed - set per-service in Railway Dashboard:
# - scrapegoat (main): python3 main.py
# - scrapegoat-worker-swarm: python start_redis_worker.py
healthcheckPath = "/health"
healthcheckTimeout = 300
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 10

[env]
PYTHONUNBUFFERED = "1"
PORT = "8080"

[environments]
[environments.production]
ENVIRONMENT = "production"
PORT = "8080"