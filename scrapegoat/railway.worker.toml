[build]
builder = "NIXPACKS"
buildCommand = "pip install -r requirements.txt && playwright install chromium"
# Watch paths are evaluated from repository root
watchPatterns = [
  "scrapegoat/**"
]

[deploy]
startCommand = "python start_redis_worker.py"
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 10
# No healthcheck - worker doesn't expose HTTP

[env]
PYTHONUNBUFFERED = "1"

[environments]
[environments.production]
ENVIRONMENT = "production"
